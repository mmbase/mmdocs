<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>SCAN</TITLE>
</HEAD>
<BODY LINK="#0000ff" VLINK="#800080">

<FONT FACE="Arial Black" SIZE=5><P><A NAME="_Toc520522488"><A NAME="_Toc520522544">SCAN</A></A></P>
</FONT><I><FONT SIZE=2><P>verion 1.0 – 30 July - Rob Vermeulen </P>

<B><P>credits:</P>
</B><P>Pierre van Rooden (NOS) – 7.1 INFO Module</P>
<P>Mark Huijser (EO) - 5 </I>Field-formatting commands</P>
<I>
</I><P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P><A NAME="_Toc520522545">Abstract&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830747">*</A>
<B><FONT FACE="Courier New" SIZE=2><P>Introduction&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830748">*</A></P><DIR>

<FONT SIZE=2><P>MMBase object cloud&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830749">*</A></P>
<FONT SIZE=2><P>Separation of Content and Presentation&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830750">*</A></P>
<FONT SIZE=2><P>How to create a MMBase website&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830751">*</A></P>
<FONT SIZE=2><P>A Template&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830752">*</A></P></DIR>

<B><FONT FACE="Courier New" SIZE=2><P>1. The $MOD Command&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830753">*</A></P>
<B><FONT FACE="Courier New" SIZE=2><P>2. The LIST Commands&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830754">*</A></P><DIR>

<FONT SIZE=2><P>2.1 List Objects&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830755">*</A></P>
<FONT SIZE=2><P>2.2 List Relations&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830756">*</A></P>
<FONT SIZE=2><P>2.3 List Multilevel&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830757">*</A></P>
<FONT SIZE=2><P>2.4 $ITEML &amp; $ITEMP&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830758">*</A></P>
<FONT SIZE=2><P>2.5 $PARAM&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830759">*</A></P>
<FONT SIZE=2><P>2.6 Shorted&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830760">*</A></P>
<FONT SIZE=2><P>2.7 Where&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830761">*</A></P>
<FONT SIZE=2><P>2.8 Listloop&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830762">*</A></P></DIR>

<B><FONT FACE="Courier New" SIZE=2><P>3 IF statement&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830763">*</A></P>
<B><FONT FACE="Courier New" SIZE=2><P>4 PART&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830764">*</A></P>
<B><FONT FACE="Courier New" SIZE=2><P>5 Field-formatting commands&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830765">*</A></P><DIR>

<FONT SIZE=2><P>5.1 Date/Time&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830766">*</A></P>
<FONT SIZE=2><P>5.2 Text&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830767">*</A></P>
<FONT SIZE=2><P>5.3 Other&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830768">*</A></P></DIR>

<B><FONT FACE="Courier New" SIZE=2><P>6 Problem solving&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830769">*</A></P><DIR>

<FONT SIZE=2><P>Your template gives an incorrect result&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830770">*</A></P>
<FONT SIZE=2><P>How can i update an out of date webpage if I used CACHE HENK or no MEMCACHE=&quot;NO&quot;&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830771">*</A></P>
<FONT SIZE=2><P>The template does not work&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830772">*</A></P>
<FONT SIZE=2><P>WHERE in the listing does not work&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830773">*</A></P></DIR>

<B><FONT FACE="Courier New" SIZE=2><P>7 Modules&#9;</B></FONT><A HREF="SCAN1_0.html#_Toc521830774">*</A></P><DIR>

<FONT SIZE=2><P>7.1 INFO Module&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830775">*</A></P>
<FONT SIZE=2><P>7.2 SESSION Module&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830776">*</A></P>
<FONT SIZE=2><P>7.3 IMAGE Module&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830777">*</A></P>
<FONT SIZE=2><P>7.5 CALC Module&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830778">*</A></P>
<FONT SIZE=2><P>7.6 STATS Module&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830779">*</A></P>
<FONT SIZE=2><P>7.7 CACHE HENK&#9;</FONT><A HREF="SCAN1_0.html#_Toc521830780">*</A></P>
<B><I><FONT FACE="Arial"></DIR>
</P>
<P><A NAME="_Toc521830747">Abstract</A></A></P>
</B></I></FONT><FONT SIZE=2>
<P>This document explains SCAN. SCAN is a MMBase scripting language used to publish dynamic content. The VPRO created SCAN to enable web designers to retrieve information from MMBase with a simple syntax. This in contradiction to scripting languages that look similar to programming languages (such as PHP, JSP). </P>

<P>The VPRO is using SCAN now for more than 3 years. SCAN started with  a couple of simple commands. Nowadays SCAN is grown to a more complex command set with many possibilities. Unfortunately, this grown has lead to an inconsistent set of commands and that is what makes SCAN difficult. </P>

<P>From August 2001 MMBase contains a MMCI interface that enables more scripting languages to retrieve information from MMBase. A JSP/TAGLIB project is defining a new set of commands that contain the SCAN functionality. The advantage of TAGLIBS is that it is being used widely and that the commands work in a organized structured manner.</P>

<P>For those who want to use SCAN can use this manual. It contains all information available for SCAN.</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P><A NAME="_Toc521830748">Introduction</A></P>
</B></I></FONT><FONT SIZE=2>
<P>It’s good to have an understanding about how MMBase works before creating a website. This chapter gives the needed background information. </P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830749">MMBase object cloud</A></P>
</B></FONT><FONT SIZE=2><P>MMBase manages its information as an object cloud. This means that MMBase does not store web pages but pieces of information (objects) and the relations between these pieces of information. e.g. A pinkpop site contains a couple of objects like: artists, audio, video, bands and news items. These objects are related to each other like ‘an artist belongs to a certain band’, or ‘a audio fragment is a single of a band’. Within the MMBase community this set of objects and relations is called the <I>object cloud</I>. This object cloud enables web designers to perform questions like: ‘show me all bands that play at Pinkpop 2000’ or ‘Show me all singles from a certain band’. The exact SCAN syntax will be given in next chapters.</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830750">Separation of Content and Presentation</A></P>
</B></FONT><FONT SIZE=2><P>The MMBase object cloud doesn’t contain information about presentation, only data is stored. In this way all data can be published in different ways by using different templates. If content is mixed with the presentation than the following problem appears. e.g. if an article contains an url like this ‘&lt;A HREF=</FONT><A HREF="http://www.pinkpop.nl/"><FONT SIZE=2>http://www.pinkpop.nl</FONT></A><FONT SIZE=2>&gt;Pinkpop site&lt;/a&gt; than the article will be published correct if HTML is used, but what if this news article is sent to a mobile phone or what if the article is converted to a PDF file. In short, MMBase stores content (without information about the presentation) in the MMBase object cloud. Templates are used to make views on the object cloud. By using different templates, different views can be created.</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830751">How to create a MMBase website</A></P>
</B></FONT><FONT SIZE=2><P>A website (a presentation of  MMBase information) can be made by creating templates that retrieve information from the MMBase object cloud. E.g. The homepage of the Pinkpop site could be a template with one listing: ‘show all bands related to the Pinkpop event’. The template will be evaluated by MMBase and the internet user will see all the bands that play at Pinkpop. If new bands are added to the Pinkpop event, they will appear at the website. The presentation is stored in the template, the information is retrieved from the MMBase object cloud. </P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830752">A Template</A></P>
</B></FONT><FONT SIZE=2><P>This document will explain how to create SCAN templates that show pieces of the object cloud in a website. A SCAN template has the extension ‘.shtml’. The webserver knows when it detects a page with the ‘.shtml’ extension that it has to pass the file to MMBase. MMBase will evaluate the template and give it back to the webserver. Instead of SCAN other scripting languages can be used. e.g. if you see a webpage ending in ‘.jsp’ you know that it’s a JSP page, not a SCAN page. Each SCAN page starts with a processor tag. The tag looks like </FONT><B><FONT FACE="Arial" SIZE=2>&lt;PROCESSOR MMBASE&gt;</P>
</B></FONT><FONT SIZE=2><P>Examples of templates can be found in the html/mmexamples directory of your MMBase system.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&nbsp;</P>
</B></FONT><FONT SIZE=2><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P><A NAME="_Toc521830753">1. The $MOD Command</A></P>
</B></I></FONT><FONT SIZE=2>
<P>Each object in MMBase has an unique object number. The $MOD command is able to retrieve an object from the object cloud. After retrieving the object you have to specify the field of the object you want to show in your template. </P>

<P>e.g. If the MMBase object cloud contains an artist object, with object number 123. The following commands can be used retrieve the firstname and surname of the artist.</P>

<P>give the firstname of the artist with object number 123.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-MMBASE-FIELD-123-firstname^</P>
</B></FONT><FONT SIZE=2><P>give the surname of the artist with object number 123.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-MMBASE-FIELD-123-surname^</P>
</B></FONT><FONT SIZE=2>
<P>&nbsp;</P>
<P>An object can have relations to other objects. SCAN contains a command to show the number of relations. To publish the number of relations the artist has, the following command can be used.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-MMBASE-GETRELATIONCOUNT-123^</P>
</B></FONT><FONT SIZE=2>
<P>In some situations you only want to count relations of a certain type. You can retrieve this information by specifying the relation type in the command. This command shows the number of relations the artist has with bands. </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-MMBASE-GETRELATIONCOUNT-123-bands^ </P>
</B></FONT><FONT SIZE=2>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P><A NAME="_Toc521830754">2. The LIST Commands</A></P>
</B></I></FONT><FONT SIZE=2>
<P>The list commands enables you to create listings in your templates. Listings are:</P>

<UL>
<LI>Show me all bands.</LI>
<LI>Show me all bands related to the event Pinkpop.</LI>
<LI>Show me the band, related to the event Pinkpop, that is performing now.</LI></UL>


<P>The questions can vary from easy question to more and more complex ones. And believe me, they can become very complex. SCAN contains three listing commands: list objects, list relations, list multilevel. In the next paragraph the differences between the list commands will be explained. All LIST commands have to be placed on one line, so no separation with enters!</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830755">2.1 List Objects</A> </P>
</B></FONT><FONT SIZE=2>
<P>List objects enables you to query a list of objects that are all of the same type.  The following listing will show the names of the bands present in the object cloud.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST OBJECTS TYPE="bands" FIELDS="name"&gt;</P>
<P>Name of the band: $ITEM1</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<P>The list object command contains a TYPE attribute. The TYPE attribute informs MMBase which objects MMBase has to list. In this example it are <I>band</I> objects. The second attribute is the FIELDS attribute. This attribute informs MMBase which fields you want to display of the object specified by TYPE. $ITEM1 corresponds to the first field listed in the FIELDS attribute. So ITEM1 shows the name of the band.</P>

<P>This tag shows the possible attributes for a list objects command.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST OBJECTS TYPE=&quot;(objectname)&quot; FIELDS=&quot;(fieldnames)&quot; </P><DIR>
<DIR>

<P>[WHERE=&quot;where (sql where)&quot;]</P>
<P>[DBSORT=&quot;fieldname&quot; [DBDIR=&quot;(DOWN|UP)]]</P>
<P>[MAX=&quot;(number)&quot;]</P>
<P>[OFFSET=&quot;(number)&quot;]</P></DIR>
</DIR>

<P>&gt;</P>
</B></FONT><FONT SIZE=2><P>Information about the WHERE attribute can be found in paragraph ‘2.7 Where’. DBSORT specifies the field to be sorted. DBDIR specifies if the sorting has to be ascending or descending. MAX specifies a maximal amount of bands you want to see. OFFSET specifies from which band you want to start. </P>

<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830756">2.2 List Relations</A> </P>
</B></FONT><FONT SIZE=2>
<P>The list relations command enables you to list related objects. e.g. If you want to list all bands that are related to the Pinkpop event you use the list relations command. The command looks like this.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST RELATIONS TYPE="bands" FIELDS="name" NODE="123"&gt;</P>
<P>Name of the band: $ITEM1 </P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<P>The TYPE attribute is used to specify which related objects you want to see. The FIELDS attribute is used to show which fields you want to display. The NODE attribute is used to indicate the object from which you want to search the relations. Object number 123 corresponds (in this case) to the object number of the Pinkpop event.</P>

<P>The attributes for sorting differ from the list objects attribute. The list relations attributes are:</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST RELATIONS TYPE=&quot;(objectname)&quot; FIELDS=&quot;(fieldnames)&quot;</P>
<P>&#9;&#9;[WHERE=&quot;where (sql query)&quot;]</P>
<P>&#9;&#9;[(SORTED=&quot;(ALPHA)&quot;) | (SORTED=&quot;(MALPHA&quot;) SORTPOS=&quot;(number)&quot;)]</P>
<P>&#9;&#9;[MAX=&quot;(number)&quot;]</P>
<P>&#9;&#9;[OFFSET=&quot;(number)&quot;]</P>
<P>&#9;&#9;[DISTINCT=&quot;yes&quot;]</P>
<P>&gt;</P>
</B></FONT><FONT SIZE=2><P>                               </P>
<P>Instead of using DBSORT the list relations command uses SORTED. SORTED can be set to ALPHA if only one fieldname in the FIELDS attribute is listed. If there is only one field listed, SCAN will sort on that field. If more fieldnames are specified in the FIELDS attribute than you have to use SORTED=&quot;MALPHA&quot;. SORTPOS is used to indicate which field has to be sorted. SORTPOS starts counting from 0, so if you want to sort on the second fieldname use SORTPOS=&quot;1&quot;.</P>

<P>This query shows five bands that perform at the Pinkpop event. The list is also sorted on the name of the bands. b.t.w. First the list will be sorted and that the first five items will be taken.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST RELATIONS TYPE="bands" FIELDS="name&quot; NODE="123&quot; MAX=&quot;5&quot; SORTED="ALPHA"&gt;</P>
<P>&#9;Name of the band: $ITEM1</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2><P>                               </P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830757">2.3 List Multilevel</A> </P>
</B></FONT><FONT SIZE=2>
<P>The list multilevel command is the most extensive one and in most cases this command will be used. The list multilevel command enables you to make ‘chains’ of information. The next example will show all audio fragments of all the bands that perform at Pinkpop.</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST MULTILEVEL TYPE="event,bands,audio" NODE="123" </P>
<P>FIELDS="bands.name,audio.title" VERSION="2.0" MEMCACHE=&quot;NO&quot;&gt;</P>
<P>Audio fragment of $ITEM1 : $ITEM2</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<P>The TYPE attribute contains a ‘chain’ of object types. The NODE attribute specifies what the starting point of the chain is. The list command starts with an event (see TYPE attribute). This event has object number 123, this is specified with the NODE attribute. So the list command lists all bands related to Pinkpop and of all the bands all related audio is listed. The FIELDS attribute specifies the fields you want to use in the template. The VERSION attribute is, uhhh, just needed. The list multilevel commands enables you to make complicated queries, that’s why the list multilevel command is cached! If you want to create very dynamic webpages you maybe want to disable the caching, this can be down by the MEMCACHE attribute.</P>
<P>        </P>
<P>b.t.w.1 If you didn’t specify MEMCACHE=&quot;NO&quot; and you want the webpage to be updated, you can do the following trick. </P>
<OL>

<LI>go to the MMBase editors.</LI>
<LI>Select the N in the right top of the editor, the N will change in a R. (N means No reload, R means Reload).</LI>
<LI>Reload the webpage with your browser, the updated information will be showed.</LI></OL>


<P>b.t.w.2 The attribute NODE informs the list multilevel command about the starting point of the chain. In the above example we used object number 123 this indicates that the Pinkpop event is the starting point of the query. If you want to use more starting points, you can specify the starting points in the NODE attribute comma separated. e.g. NODE=&quot;123,234,345&quot;. If you want to use all events as a starting point you can use NODE=&quot;-1&quot;.</P>

<P>b.t.w.3  If you want to use two times the same object types in a multilevel you can index the object type:</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST MULTILEVEL type="bands1,bands2"  node="-1" fields="bands1.name, bands2.name"&gt;</P>
</B></FONT><FONT SIZE=2>
<P>Sorting fields with list multilevel can be done in the same way as sorting  with the list objects command. This are all the attributes of the list multilevel command:</P>
<P> </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST MULTILVEL TYPE=&quot;(objectnames)&quot; FIELDS=&quot;(fieldnames)&quot; </P><DIR>
<DIR>

<P>[WHERE=&quot;where (sql where)&quot;]</P>
<P>[DBSORT=&quot;fieldname&quot; [DBDIR=&quot;(DOWN|UP)]]</P>
<P>[MAX=&quot;(number)&quot;]</P>
<P>[OFFSET=&quot;(number)&quot;]</P>
<P>[MEMCACHE=&quot;NO&quot;]</P>
<P>[DISTINCT=&quot;YES&quot;]</P></DIR>
</DIR>

<P>&gt;</P>
</FONT><FONT FACE="Arial" SIZE=2>
<P>&nbsp;</P>
<P><A NAME="_Toc521830758">2.4 $ITEML &amp; $ITEMP</A> </P>
</B></FONT><FONT SIZE=2>
<P>Within your list tag you are able to use the following commands.</P>
<P>&lt;LIST OBJECTS TYPE=&quot;bands&quot; FIELDS=&quot;title&quot;&gt;</P>
<P>&#9;$ITEML</P>
<P>&#9;$ITEMP</P>
<P>&lt;/LIST&gt;</P>
<P>                    </P>
<P>In this example $ITEML shows the total amount of bands. $ITEMP shows the current position of the bands that are returned.                               </P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830759">2.5 $PARAM</A></P>
</B></FONT><FONT SIZE=2>
<P>The previous paragraphs showed that some commands need the NODE attribute which specifies the starting point for the listing commands. Previous examples were using NODE=&quot;123&quot; which indicated that the starting point was the Pinkpop event. Normally you don’t fill in the object number, but that value is given by a $PARAM. A parameter is a value that can be passed to a webpage as an attribute in the URL. e.g.</P>
<P></FONT><A HREF="http://www.vpro.nl/pinkpop?123"><FONT SIZE=2>http://www.vpro.nl/pinkpop.shtml?123+param2+234</FONT></A><FONT SIZE=2> is an url with three parameters. If you request that page MMBase will evaluate that webpage. In the pinkpop.shtml webpage there will be three variables, namely: $PARAM1, $PARAM2 and $PARAM3. So instead of using NODE=&quot;123&quot; you will use NODE=&quot;$PARAM1&quot; in this way the node variable is filled in dynamically. And in that way the template can be used for different festivals and not only the festival starting with NODE=&quot;123&quot;.</P>

<P> </P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830760">2.6 Shorted</A> </P>
</B></FONT><FONT SIZE=2>
<P>When using the list commands you can get the word $SHORTED in your webpage. $SHORTED means that the list command does not give you the value you asked for. This is done to prevent that very large objects are loaded in MMBase. The next list command will show this.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST MULTILEVEL TYPE="event,bands,news" NODE="123" </P><DIR>
<DIR>

<P>FIELDS="news.number,news.text" VERSION="2.0"&gt;</P></DIR>
</DIR>

</B></FONT><FONT SIZE=2><P>&#9;</P>
<P>&#9;The text of the newsarticlewith item2: $ITEM2 &lt;BR&gt;</P>
<P>&#9;The test of the newsarticle with mod: $MOD-MMBASE-FIELD-$ITEM1 &lt;BR&gt;</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<P>This list command can result in the next output:</P>
<I><P>The text of the newsarticlewith item2: $SHORTED</P>
<P>The test of the newsarticle with mod: Pinkpop is een jaarlijks terugkerend event. Het ……………</P>
</I>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830761">2.7 Where</A> </P>
</B></FONT><FONT SIZE=2>
<P>The WHERE attribute can have two forms. The ‘normal’ form is an own created form. The second one gives the possibility to specify a SQL like constraint. This first example shows the ‘own’ created where.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST OBJECTS TYPE=&quot;bands&quot; FIELDS=&quot;name,description&quot; WHERE=&quot;name=EProdigy&quot;&gt;</P>
<P>&#9;Information about the band Prodigy</P>
<P>&#9;$ITEM2</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<P>WHERE=&quot;name=EProdigy&quot; means that the name of the band has to be Equal to Prodigy. Another operator that can be used is ‘=N’ which means ‘is not equals to’.</P>
<P>If ‘where’ is added in the WHERE attribute a SQL like syntax can be used. The following example shows this.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST OBJECTS TYPE=&quot;bands&quot; FIELDS=&quot;name,description&quot; </P>
<P>WHERE=&quot;where name=’Prodigy’&quot;&gt;</P>
<P>&#9;Information about the band Prodigy</P>
<P>&#9;$ITEM2</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<B><P>Be careful, </B>you can never use a &gt; (greater than) sign in your where statement. MMBase evaluates the ‘&gt;’ sign as if it is the end of the list command. So instead of using A &gt; B use B &lt; A. This of course is a bug.</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830762">2.8 Listloop</A> </P>
</B></FONT><FONT SIZE=2>
<P>The listloop commands allows you to create headers and footers for list output. It defines the block to                               handle when iterating through a list. All other statements in a LIST are scanned only once.</P>

<P>The following list command:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST MULTILEVEL TYPE="event,bands" NODE=&quot;123&quot; FIELDS="bands.name"&gt;</P>
<P>&#9;These list shows all bands performing at Pinkpop</P>
<P>&lt;LISTLOOP&gt;</P><DIR>
<DIR>

<P>$ITEM1</P></DIR>
</DIR>

<P>&lt;/LISTLOOP&gt;</P>
<P>&#9;This is the end of the list.</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P><A NAME="_Toc521830763">3 IF statement</A> </P>
</B></I></FONT><FONT SIZE=2>
<P>The ‘if’ statement enables you to use conditions in templates. e.g. According to the amount of bands that are related to an event a different layout can be used. The following example will show this.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;IF $MOD-MMBASE-GETRELATIONCOUNT-123-bands^=L10&gt;</P>
</B></FONT><FONT SIZE=2><P>&#9;There are less than 10 bands related, so show this layout.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;ELSE&gt;</P>
</B></FONT><FONT SIZE=2><P>&#9;There are more than 10 bands related, so show this layout.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;/IF&gt; </P>
</B></FONT><FONT SIZE=2>
<P>The values to compare can consists of other SCAN commands (as the example above), typed text and numerical values. While creating an IF statement you can also use the boolean operators OR an AND.</P>

<B><P>Numerical operators:</P>
</B><P>=E, equals </P>
<P>=N, not equals</P>
<P>=H, Higher than</P>
<P>=L, Less than</P>
<P>=A, Greater or Equal than</P>
<P>=M, Less or Equal than</P>

<B><P>String operators:</P>
</B><P>=E, equals</P>
<P>=N, not equals</P>
<P>=C, equals (case insensitive)</P>

<P>&nbsp;</P>
<P>The next example shows an if statement in a list command. If an if statement is used within a list command the first IF words is changed to LIF, the ending IF stays an IF!</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST OBJECT TYPE=&quot;bands&quot; FIELDS=&quot;name&quot; MAX=&quot;20&quot;&gt;</P>
<P>&#9;Bandname: ITEM1</P>
<P>&#9;&lt;LIF $ITEMP=E$ITEML&gt;</P>
<P>&#9;&#9;next 20 bands</P>
<P>&#9;&lt;/IF&gt;</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2><P>&#9;&#9;</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P><A NAME="_Toc521830764">4 PART</A> </P>
</B></I></FONT><FONT SIZE=2>
<P>A part includes another .shtml page into the template. In this way you can keep your templates small. Another useful function of PART if when you want to nest list commands. Nesting of list commando’s in one .shtml page is not possible. By using a PART within a list commando you can achieve nesting of listings. The following example will show this.</P>

<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Courier New" SIZE=2><P>pinkpop.shtml</P>
</I><P>&lt;LIST MULTILEVEL TYPE="event,bands" NODE=&quot;123&quot; FIELDS="bands.number,bands.title"&gt;</P>
<P>&#9;The band $ITEM2 has the following artists: </P>
<P>              &lt;PART /showArtistsOfABand.shtml?$ITEM1&gt;</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
</FONT><B><I><FONT FACE="Courier New" SIZE=2><P>showArtistsOfABand.shtml</P>
</I><P> &lt;LIST MULTILEVEL TYPE="bands,artists" NODE=&quot;$PARAM1&quot;</P>
<P>FIELDS="artists.name"&gt;</P>
<P>&#9;$ITEM1</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P><A NAME="_Toc521830765">5 Field-formatting commands</A> </P>
</B></I></FONT><FONT SIZE=2>
<P>The following formatting commands can be useful within your $MOD-MMBASE-FIELD-... command. You also can use these commands in the FIELDS-list within your LIST  MULTILEVEL, LIST RELATIONS or LIST OBJECTS. Don't use these commands inside the WHERE-clause of a LIST. It won't work.</P>

<P>Here are two examples of how the commands work. These two will output exactly the same thing.</P>

</FONT><B><I><FONT FACE="Courier New" SIZE=2><P>Example 1:</P>
</I><P>&lt;LIST OBJECTS TYPE="mmevents" NODE="-1"</P>
<P>FIELDS="number,shorted(name),date(start),date(stop)"&gt;</P>
<P>$ITEM2</P>
<P>$ITEM3</P>
<P>$ITEM4</P>
<P>&lt;/LIST&gt;</P>

<I><P>Example 2:</P>
</I><P>&lt;LIST OBJECTS TYPE="mmevents" NODE="-1" FIELDS="number"&gt;</P>
<P>$MOD-MMBASE-FIELD-$ITEM1-shorted(name)^</P>
<P>$MOD-MMBASE-FIELD-$ITEM1-date(start)^</P>
<P>$MOD-MMBASE-FIELD-$ITEM1-date(stop)^</P>
<P>&lt;/LIST&gt;</P>
</B></FONT><FONT SIZE=2>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830766">5.1 Date/Time</A> </P>
</B></FONT><FONT SIZE=2>
<P>All of the Date/Time formatting commands need a "fieldname" as function parameter. Be sure to fieldname which contains an integer (epoch-time number in seconds since 1970).</P>
<P>Date/Time formatting commands are:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>date(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to a date in the format hh:mm:ss dd/mm/yyyy</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>time(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to a time in the format hh:mm</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>timesec(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to a  time in the format hh:mm:ss</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>longmonth(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to the name of month.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>monthnumber(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to the number of month.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>month(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of object to the abbreviation of month.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>weekday(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to name of the day of the week</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>shortday(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to an abbreviation of the name of the day of the week</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>day(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to the number of the day of the week</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>shortday(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to an  abbreviation of the name of the day of the week</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>shortyear(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to a two-digit abbreviation of the year</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>year(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to a four-digit representation of the year</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>thisdaycurtime(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field of the specified object to the beginning of that day (00:00). Output is (again) epoch-time. (!) Tested this one in the Netherlands, where we are 1 hour ahead (summertime), my test resulted in (01:00).</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830767">5.2 Text</A> </P>
</B></FONT><FONT SIZE=2>
<P>All of these text conversion and formatting commands need a "fieldname" as function parameter. Be sure to use a fieldname which contains a text string. </P>
<P>Text conversion and formatting commands are:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>wap(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified (text)field in a special way to support WAP.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>html(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified (text)field in a special way for html-support. html() substitutes one newline by &lt;br /&gt; and two newlines by &lt;p&gt; &lt;/p&gt;.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>shorted(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Just displays the first 32 characters of the specified text field, and appends "..." to the result.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>uppercase(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field to uppercase characters.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>lowercase(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Formats the specified field to lowercase characters.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>hostname(&lt;fieldname&gt;)</P>
</B></FONT><FONT SIZE=2><P>Strips the hostname (e.g. www.mmbase.org) from the specified field. This will *only* work if the specified                         text field is of the format http://&lt;hostname&gt;/&lt;whatever&gt;.</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>wrap(&lt;fieldname&gt;;&lt;width&gt;)</P>
</B></FONT><FONT SIZE=2><P>Will output the specified text field wrapped to the specified width. &lt;width&gt; is the maximum number of characters on a line. Wrap just inserts newlines all through the text to fit the text to the desired width. So,</P>
<P>using wrap in your html-template will not have the desired effect. In this case you will need to combine</P>
<P>the html() and wrap() command.</P>
<P>                               </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>substring(&lt;fieldname&gt;,&lt;length&gt;[,filler-string])</P>
</B></FONT><FONT SIZE=2><P>substring() will take a substring of the specified length from the beginning of the specified textfield. The end of                       the substring will be replaced by the optional  fillerstring.</P>

<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830768">5.3 Other</A> </P>
</B></FONT><FONT SIZE=2>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>age()</P>
</B></FONT><FONT SIZE=2><P>Will return the age of the specified object. No  function parameters are needed. Example: $ MOD-MMBASE-FIELD-777-age()^</P>

<P>gui([fieldname])</P>
<P>gui() should return the gui-name of the field that is specified. If no field specified, gui() will return the gui-name of the node. I tried to test this one, but I couldn't get it working :-(</P>
</FONT><B><I><FONT FACE="Arial"><P><A NAME="_Toc521830769">6 Problem solving</A></P>
</B></I></FONT><FONT SIZE=2>
<B><P><A NAME="_Toc521830770">Your template gives an incorrect result</A></P>
</B><P>Maybe the information in your page is cached. The list multilevel caches it’s information or if you use cache henk your information will be cached.</P>

<B><P><A NAME="_Toc521830771">How can I update an out of date webpage if I used CACHE HENK or no MEMCACHE=&quot;NO&quot;</A></P>
<OL>

</B><LI>Open the MMBase editors</LI>
<LI>Click on the N in the right top of your screen. It will change to a R.</LI>
<LI>Open the webpage you want to update and reload the page (maybe with shift-reload).</LI></OL>


<B><P><A NAME="_Toc521830772">The template does not work</A></P>
</B><P>Is the extension of the template ‘.shtml’ and does your template begin with the &lt;PROCESSOR MMBASE&gt; tag?</P>
<P>If you use list commands check your logfile, you probably made a typing error.</P>

<B><P><A NAME="_Toc521830773">WHERE in the listing does not work</A></P>
</B><P>You can never use a &gt; (greater than) sign in your where statement. MMBase evaluates the ‘&gt;’ sign as if it is the end of the list command. So instead of using A &gt; B use B &lt; A. This of course is a bug.</P>

<B><P>&nbsp;</P>
</B><P>&nbsp;</P>
</FONT><B><I><FONT FACE="Arial"><P>&nbsp;</P>
<P><A NAME="_Toc521830774"></P>
<P>7 Modules</A></P>
</B></I></FONT><FONT SIZE=2>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830775">7.1 INFO Module</A></P>
</B></FONT><FONT SIZE=2>
<P>The INFO module supplies SCAN with the possibilities to query the underlying server for data concerning the system or the current user. Most of its functions have their counterparts in other scripting languages (with a few exceptions). Information retrieved include system colors, server settings, user properties, or various miscellaneous functions such as retrieval of time or random numbers.</P>

<P>This document describes the INFO commands.</P>

<P>LIST commands:</P>
<P>&lt;LIST COLOR&gt;  </P>
<P>&lt;LIST RANGE&gt;</P>
<P>&lt;LIST SCANDATE&gt;</P>

<P>$MOD commands:</P>
<P>$MOD-INFO-BROWSER </P>
<P>$MOD-INFO-DECODE</P>
<P>$MOD-INFO-ENCODE</P>
<P>$MOD-INFO-ESCAPE</P>
<P>$MOD-INFO-EXISTS </P>
<P>$MOD-INFO-MEMORY </P>
<P>$MOD-INFO-MOVE</P>
<P>$MOD-INFO-OS </P>
<P>$MOD-INFO-RANDOM </P>
<P>$MOD-INFO-RELTIME </P>
<P>$MOD-INFO-STRING </P>
<P>$MOD-INFO-STRINGCMP </P>
<P>$MOD-INFO-TIME</P>
<P>$MOD-INFO-TIMEFORMAT </P>
<P>$MOD-INFO-TIMEFORMATSEC </P>
<P>$MOD-INFO-USER  </P>

<P>&nbsp;</P>
<P>&nbsp;</P><DIR>
<DIR>

</FONT><B><FONT FACE="Courier New"><P>7.1.1 LIST commands</P>
</B></FONT><FONT SIZE=2></DIR>
</DIR>

<P>The syntax of a INFO list command is : &lt;LIST command PROCESSOR="INFO" parameters &gt;.</P>
<P>The lists supplied by INFO return lists of colors, numerical ranges, and file dates.</P>

<P>&lt;LIST COLOR&gt;</P>

<P>This command returns a list of colors and their corresponding RGB values. It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST COLOR[-(SPECTRUM|BASIC)] ITEMS="2" PROCESSOR="INFO"&gt;</P>
</B></FONT><FONT SIZE=2>
<P>SPECTRUM (the default) returns a list of primary and secondary colors (8 colors, including black and white).</P>
<P>BASIC returns a list of basic RGB colors (black, white, red, green, blue), as well as mint green and mint blue.</P>

<P>The list returned contains sets of two items each:</P>

<P>     $ITEM1 : the color name</P>
<P>     $ITEM2 : the RGB value</P>

<P>&lt;LIST RANGE&gt;</P>

<P>This command returns a list of values within a specified range.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST RANGE[-start[-end[-step]]] ITEMS="1" PROCESSOR="INFO"&gt;</B></FONT><FONT SIZE=2> or</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST RANGE-ALPHA ITEMS="1" PROCESSOR="INFO"&gt;</P>
</B></FONT><FONT SIZE=2>
<P>If 'ALPHA' is requested, the list returns the characters of the alphabet ('A' through 'Z').</P>
<P>Otherwise, it will return a list of numerical values, starting at [start], and ending on [end], with a [step] interval.</P>
<P>For instance, RANGE-0-20-5 returns 0,5,10,15,20.</P>
<P>The defaults for start, end and step are 1, 10, and 1.</P>
<P>The list returned contains only singular values:</P>

<P>     $ITEM1 : the character or numerical value</P>

<P>&lt;LIST SCANDATE&gt;</P>

<P>This command returns the creation dates of all directories with a length of 10 characters that can be found within a given path, and whose creation date falls within a specified range.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;LIST SCANDATE BASE="path" START="date" [END="date"] [STARTINCLUDED="(TRUE|FALSE)"] </P>
<P>[ENDINCLUDED="(TRUE|FALSE)"]</P>
<P>     &#9;[REVERS="(TRUE|FALSE)"] ITEMS="4" PROCESSOR="INFO"&gt;</P>
</B></FONT><FONT SIZE=2>
<P>START, END, STARTINCLUDED and ENDINCLUDED limit the range of dates to return. REVERS affects the sort order of the dates (ascending if FALSE, descending if TRUE).</P>
<P>This command is very specific and use of it is encouraged, as it is unsure whether it will be supported in the future.</P>

<P>The list returned contains sets of four items each:</P>

<P>     $ITEM1 : the date in YYYY-MM-DD format</P>
<P>     $ITEM2 : the name of the month (in Dutch)</P>
<P>     $ITEM3 : the day of the month</P>
<P>     $ITEM4 : the day of the week (in Dutch)</P>
</FONT>
<P>&nbsp;</P>
<P>7.1.2 $MOD commands</P>
<FONT SIZE=2>
<P>INFO's $MOD commands are very extensive, and return information on the system, the time, the user, anD the user's browser. It also hold a number of functions used for manipulating text or numbers.</P>
<P>Most of these functions have equivalents on other scripting languages.</P>

<P>$MOD-INFO-BROWSER</P>

<P>This command returns information on the type and properties of the user's browser.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-BROWSER[-(NAME|HTTP-header|OS|WANTEDHOST|NETSCAPE|MSIE) ]</P>
</B></FONT><FONT SIZE=2>
<P>NAME (the default) returns the name of the current browser. Equivalent to $MOD-BROWSER-HTTP-User-Agent. WANTEDHOST returns the host's name. Equivalent to $MOD-BROWSER-HTTP-Host. OS retrieves the operating system name (as $MOD-INFO-OS). HTTP returns the value of header in the HTTP-header of the user's request (i.e. Referrer or Pragma). NETSCAPE : returns YES if the current browser is Netscape navigator (NO otherwise). MSIE returns YES if the current browser is internet explorer.</P>
<P>The default command executed is NAME. </P>

<P>$MOD-INFO-DECODE</P>

<P>This command converts an URL-encoded string to its unencoded format.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-DECODE-string</P>
</B></FONT><FONT SIZE=2>
<P>Any sequence of the form %XX, with XX being an hexadecimal value, is converted into its corresponding ASCII value.</P>
<P>See $MOD-INFO-ENCODE below.</P>

<P>$MOD-INFO-ENCODE</P>

<P>This command converts an URL-encoded string back to its unencoded format.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-ENCODE-string</P>
</B></FONT><FONT SIZE=2>
<P>The value 'string' may contain any characters except the space. It is converted to a URL-endoced string, which can then be passed as an argument. This allows the system to pass arguments which contain otherwise illegal symbols such '+' (normally used to separate arguments), or URL-specific characters such as '#', '?', etc.</P>

<P>$MOD-INFO-ESCAPE</P>

<P>This command replaces single quotes (') in a string by an escape sequence.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-ESCAPE-string</P>
</B></FONT><FONT SIZE=2>
<P>Any occurrence of a single quote (') is replaced by two single quotes (''). This allows using a value within a single-quote string delimiter, such as in javascript or tag values.</P>
<P>Note though that the official way to delimit a tag value is by using double quotes (").</P>

<P>$MOD-INFO-EXISTS</P>

<P>This command tests whether a given file exists on the system.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-EXISTS-(DIR|PATH|FILE)-filename</P>
</B></FONT><FONT SIZE=2>
<P>DIR checks whether a given filename exists as a directory. FILE checks whether a given filename exists as a file. PATH checks whether a given filename exists as a path (either a directory or a file).</P>
<P>The value returned is YES if successful, NO if the check fails. Note that the filepath cannot include the '-' sign, which is used in the $MOD command syntax.</P>

<P>$MOD-INFO-MEMORY</P>

<P>This command retrieves free available memory.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-MEMORY[-(GETJVM|GETSYS)[-(B|KB|MB)]]</P>
</B></FONT><FONT SIZE=2>
<P>The command GETJVM retrieves the free memory in the Java Virtual Machine. The command GETSYS retrieves the free memory in the system. The commands B, KB, and MB determine</P>
<P>whether the free memory is shown in bytes, kilo bytes, or megabytes. The default is to get the JVM memory in bytes.</P>

<P>$MOD-INFO-MOVE</P>

<P>This command moves a file from one place on the system to another.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-MOVE-fromfilename-tofilename</P>
</B></FONT><FONT SIZE=2>
<P>The file with the path and name fromfilename is moved to the destination indicated by tofilename. Obviously this command should be handled with some care. Note that the filepaths cannot include the '-' sign, which is used in the $MOD command syntax.</P>

<P>$MOD-INFO-OS</P>

<P>This command returns the name of the user's Operating System.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-OS</P>
</B></FONT><FONT SIZE=2>
<P>This command takes no arguments.</P>

<P>$MOD-INFO-RANDOM</P>

<P>This command returns a random number.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-RANDOM-start-end</P>
</B></FONT><FONT SIZE=2>
<P>The command arguments are the start and end of the numerical range in which the random number should fall.</P>
<P>Not specifying either returns 0.</P>

<P>$MOD-INFO-RELTIME</P>

<P>This command returns a part of a given relative time value.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-RELTIME-(GET[TIME]|GETHOURS|GETMINUTES|GETSECONDS|GETMILLIS)-timevalue</B></FONT><FONT SIZE=2> or</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-RELTIME-COUNTMILLIS-HH-mm-ss-SSS</P>
</B></FONT><FONT SIZE=2>
<P>The first version of this command returns the time (HH:mm:ss:SSS), or the hours, minutes, seconds, or milliseconds part left in the indicated time value (the total of milliseconds that passed).</P>
<P>The second version converts an timeformat (HH:mm:ss:SSS) into the total nr of milliseconds.</P>

<P>$MOD-INFO-STRING and $MOD-INFO-STRINGCMP</P>

<P>Compares two strings.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-STRING-(EQUALS|STARTSWITH(-x)|LEFTSTRING(-x)|ENDSWITH </P>
<P>RIGHTSTRING|INDEXOF|CONTAINS)-string1-string2 </P>
</B></FONT><FONT SIZE=2><P>or</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-STRINGCMP-(EQUALS|STARTSWITH(-x)|LEFTSTRING(-x)|ENDSWITH|</P>
<P>RIGHTSTRING|INDEXOF|CONTAINS)-string1-string2 </P>
</B></FONT><FONT SIZE=2>
<P>This call tests two strings. The STRING command returns true if the test succeeds, and false if it fails. </P>
<P>STRINGCMP returns the same results as the values YES or NO.</P>
<P>The command requires one of the following commands :</P>
<P>EQUALS test whether string1 and string2 are the same. </P>
<P>STARTSWITH or LEFTSTRING test whether string1 starts with the contents of string2, using an optional value x as an offset for the search position in string1. </P>
<P>ENDSWITH or RIGHTSTRING test whether string1 ends with the contents of string2.</P>
<P>INDEXOF or CONTAINS test whether the contents of string2 is somewhere in string1.</P>

<P>$MOD-INFO-TIME</P>

<P>This command returns a part of the current time (or an offset thereof) in a specified format.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-TIME[-timevalue][-(NAME|ENGLISH|DUTCH|DUTCHNAME|NUMBER)][-timepart]</P>
</B></FONT><FONT SIZE=2>
<P>The command optionally takes a timevalue as input. The value is expected to be in seconds. By default, the current time will be used. </P>

<P>The next optional part determines the format in which certain elements are returned.</P>
<P>If NAME or ENGLISH are specified, months or weekdays are given in English. |</P>
<P>DUTCH or DUTCHNAME results in Dutch texts. </P>
<P>NUMBER (the default) returns months and weekdays as numeric values.</P>

<P>The last part of the command determines what part of the time is returned.</P>
<P>The specified timepart can be one of the following values:</P>
</FONT>
<TABLE BORDER CELLSPACING=1 CELLPADDING=4 WIDTH=614>
<TR><TD WIDTH="32%" VALIGN="TOP">
<B><FONT FACE="Arial" SIZE=2><P ALIGN="CENTER">Command</B></FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<B><FONT FACE="Arial" SIZE=2><P ALIGN="CENTER">Result</B></FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>TIME</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>the time in HH:MM format. (i.e. 12:30)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>YEAR</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>the year including century part (i.e.2001)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>SHORTYEAR</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>the year without century part (i.e. 01)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>MONTH</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The month in either numeric or 'long' format (i.e. 1 or January)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>SHORTMONTH</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The month in either numeric or 'short' format (i.e. 1 or jan)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>MONTHS or SHORTMONTHS</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Returns the number of months since the epoch (i.e. 370)                                                              The specified format should be NUMBER.</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>MONTHS-YEAR-x or SHORTMONTHS-YEAR-x</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Returns the year in which the xth month falls, counting from 1970 (i.e. 1978) The specified format can not be NUMBER.</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>MONTHS-MONTH-x or MONTHS-x</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Returns the (long) name of the xth month, counting from 1970 (i.e. March)</P>
<P>The specified format can not be NUMBER</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>SHORTMONTHS-MONTH-x</P>
</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Returns the (short) name of the xth month, counting from 1970 (i.e. Mar)</P>
<P>The specified format can not be NUMBER.</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>SHORTMONTHS-x</P>
</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Returns the (short) name of the xth month, counting from 1970, with the year following,( i.e. Mar 1971)</P>
<P>The specified format can not be NUMBER</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>WEEK</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The number of the week in the current year, not counting partial weeks.</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>PREVWEEK</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Number of the previous week</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>NEXTWEEK</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Number of the next week</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>WEEKDATE-x</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Date of the xth day of this week (i.e. 18 November). For some reason this doesn't match. </FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>NEXTWEEKDATE-x</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Date of the xth day of the next week (i.e. 25 November)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>WEEKCURTIME</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Returns a timevalue in seconds, counted from the first day of the week</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>WEEKOFYEAR</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The number of the week in the current year including partial weeks</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>WEEKOFMONTH</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The number of the week in the current month</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>DAY or DAYOFMONTH</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The number of the day in the current month</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>WEEKDAY or DAYOFWEEK</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The number or the (long) name of the day of the week ( i.e. Tuesday)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>SHORTDAYOFWEEK</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The number or the short name of the day of the week ( i.e. Tue)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>DAYOFWEEKINMONTH</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The number or the ordinal day of the week in the month (i.e.5)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>YDAY or DAYOFYEAR</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The day of the year (i.e. 235)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>HOUR</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The hour of the morning or afternoon (i.e. 4)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>HOUROFDAY</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The hour of the day (i.e. 16)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>MIN</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The minutes</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>SEC</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The seconds</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>CURTIME</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The current time in seconds (timevalue and format are ignored)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>DCURTIME</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The current time in seconds (timevalue and format are ignored)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>CURTIME10</P>
</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The current time in sections of 10 seconds (timevalue and format are ignored)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>CURTIME20</P>
</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>The current time in sections of 20 seconds (timevalue and format are ignored)</FONT></TD>
</TR>
<TR><TD WIDTH="32%" VALIGN="TOP">
<FONT SIZE=2><P>(none)</P>
</FONT></TD>
<TD WIDTH="68%" VALIGN="TOP">
<FONT SIZE=2><P>Not specifying a command returns the date and time using the default system settings.</FONT></TD>
</TR>
</TABLE>

<FONT SIZE=2>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>$MOD-INFO-TIMEFORMAT and $MOD-INFO-TIMEFORMATSEC</P>

<P>Formats either the current or a given timevalue according to a specified format.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-TIMEFORMAT[-timevalue][-format] </P>
</B></FONT><FONT SIZE=2><P>or</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-TIMEFORMATSEC[-timevalue][-format]</P>
</B></FONT><FONT SIZE=2>
<P>The timevalue is optional. If not given, the current time is used. The TIMEFORMATSEC command expects a timevalue in seconds, the TIMEFORMAT command expects a timevalue in milliseconds.</P>
<P>The format can contain the following symbols: h: hours, H:hour of the day, m: minutes, s: seconds, S: milliseconds, _ (underscore): space.</P>
<P>The default format is HH:mm:ss.</P>

<P>$MOD-INFO-USER</P>

<P>Retrieves information on the current user.</P>
<P>It's syntax is:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-INFO-USER-[(NAME|HOSTNAME|IPNUMBER|SECLEVEL|</P>
<P>REQUEST_URI|BACK|COUNTRY|DOMAIN|INDOMAIN)]</P>
</B></FONT><FONT SIZE=2>
<P>This call returns info from the user.</P>
<P>NAME (the default), returns the username.</P>
<P>HOSTNAME returns the name of the remote (visiting) host </P>
<P>IPNUMBER returns the ipnumber of the remote host</P>
<P>SECLEVEL returns the current security level</P>
<P>REQUEST_URI returns the path of the file requested.</P>
<P>BACK returns the URL of the page visited before the current page. Equivalent to $MOD-BROWSER-HTTP-Referrer.</P>
<P>COUNTRY returns the country of the remote host.</P>
<P>DOMAIN returns the domain name of the remote host.</P>
<P>INDOMAIN returns YES when the remote host has the same domain as the current one. Otherwise it returns NO.</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830776">7.2 SESSION Module</A> </P>
</B></FONT><FONT SIZE=2>
<P>By using the SESSION module, you're able to remember information that belongs to a user who requests a certain page. For example, if someone tells you he likes jazz music, you can relate that information to that user.</P>

<P>The following command will set the value jazz by the session name FAVORATE_MUSIC.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;DO SESSION-FAVORATE_MUSIC=jazz&gt;</P>
</B></FONT><FONT SIZE=2>
<P>If the same person goes to another page, you can display this information by using the command.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$SESSION-FAVORATE_MUSIC</P>
</B></FONT><FONT SIZE=2>
<P>&nbsp;</P>
<P>The &lt;DO SESSION-FAVORATE_MUSIC=jazz&gt; remembers the information in the memory of the computer. If you want to save this information, you have to use the command: </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;SAVE SESSION-FAVORATE_MUSIC&gt;</P>
</B></FONT><FONT SIZE=2>
<P>A session variable can contain a set of variables. e.g. If you want to remember all persons selected by somebody. it's possible to create a SESSION variable called PERSONS that contains a set of persons. The following commands manipulate this set:</P>
<P>$MOD-SESSION-CLEARSET-PERSONS delete all persons from the set.</P>
<P>$MOD-SESSION-DELSET-PERSONS-HENK deletes HENK from the set PERSONS.</P>
<P>$MOD-SESSION-ADDSET-PERSONS-HENK adds the value HENK to the set PERSON, if HENK already exists nothing is done.</P>
<P>$MOD-SESSION-PUTSET-PERSONS-HENK adds the value HENK to the set PERSON, regardless if HENK already exists it will be inserted.</P>
<P>$MOD-SESSION-SETSTRING-PERSONS gives all elements of the set PERSONS (comma separated)</P>
<P>$MOD-SESSION-CONTAINSSET-PERSONS-HENK, return "YES" if HENK consists in the set PERSONS, otherwise "NO" will be returned.</P>
<P> $MOD-SESSION-SETCOUNT-HENK, will return the numbers of values in the set PERSONS.</P>
<P> $MOD-SESSION-AVGSET-HENK, will calculate the average of all values in the set (the values have to be numbers!).</P>

<P>&nbsp;</P>
<P>By using the following FORM in your HTML page the session variables can be set. See the NAME attribute of the INPUT tag.</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;FORM METHOD=POST ACTION="some_shtml_page.shtm"&gt;</P>
<P>&lt;INPUT TYPE="CHECKBOX" NAME="SESSION-PERSONS" value="Rob"&gt;Rob </P>
<P> &#9;&lt;INPUT TYPE="CHECKBOX" NAME="SESSION-PERSONS" value="Henk"&gt;Henk </P>
<P>              &lt;INPUT TYPE="SUBMIT" VALUE="Select Person"&gt;</P>
<P>&lt;/FORM&gt;</P>
</B></FONT><FONT SIZE=2>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830777">7.3 IMAGE Module</A> </P>
</B></FONT><FONT SIZE=2>
<P>Images can be received form MMBase by placing the following tag in your template:</P>

</FONT><B><FONT FACE="Courier New" SIZE=2><P>&lt;IMG name="Blabla" SRC="http://www.mmbase.org/img.db?objectnumber&gt;</P>
</B></FONT><FONT SIZE=2>
<P>The first time the image is requested it will take some time, because the image has to be rendered to the                            wanted format. The second time the image is requested the  image in will be received from a cache.</P>

<P>The location of your internet browser will point at http://www.mmbase.org/img.db?1045+s(600x600)</P>

<P>This means that the image with object number 1045 will be displayed (MMBase logo) and that the size of the</P>
<P>image has to fit in a box of 600 by 600 pixels. Images can be rendered in a lot of ways. This paragraph will show some commands. Play with them and see what happens.</P>

<P>Scaling with one value: </P>
<P></FONT><A HREF="http://www.mmbase.org/img.db?1045+s(100"><B><FONT FACE="Courier New" SIZE=2>http://www.mmbase.org/img.db?1045+s(100</B></FONT></A><B><FONT FACE="Courier New" SIZE=2>)</P>
</B></FONT><FONT SIZE=2><P>Scaling with two values: </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+s(60x50)</P>
</B></FONT><FONT SIZE=2><P>Resize:</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+s(380!x10!) </P>
</B></FONT><FONT SIZE=2><P>This will be the size of the image.</P>

<P>format:</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+f(gif) </P>
</B></FONT><FONT SIZE=2><P>The image will be displayed as gif, use e.g. jpeg if you don't want to display animated gifs.</P>

<P>modulate: </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+modulate(0,-100,0)</P>
</B></FONT><FONT SIZE=2><P>The modulate command is always followed by 3 numbers between brackets. The numbers stand for brightness [-100,100], saturation [-100,100] and hue [-100, 100]. Here are a few examples; try your own combinations.</P>

<P>border:</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+bordercolor(000000)+border(3x20)</P>
</B></FONT><FONT SIZE=2>
<P>part: </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+part(0x0x150x150)</P>
</B></FONT><FONT SIZE=2><P>This is the same as the crop filter. The first two numbers are coordinates for a beginning point (y,x), the other two for the end point.</P>

<P>roll: </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+roll(60x20)</P>
</B></FONT><FONT SIZE=2><P>This is just like Photoshop's wrap filter. The number indicates the horizontal value, the second gives the vertical value. </P>

<P>mirror: </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+flipx </P>
<P>http://www.mmbase.org/img.db?1045+flipy</P>
</B></FONT><FONT SIZE=2>
<P>rotate: </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+r(90)</P>
</B></FONT><FONT SIZE=2>
<P>some more: </P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>http://www.mmbase.org/img.db?1045+wave(30) </P>
<P>http://www.mmbase.org/img.db?1045+swirl(200) </P>
<P>http://www.mmbase.org/img.db?1045+shear(30)</P>
</B></FONT><FONT SIZE=2><P></FONT><A HREF="http://www.mmbase.org/img.db?1045+raise(20"><B><FONT FACE="Courier New" SIZE=2>http://www.mmbase.org/img.db?1045+raise(20</B></FONT></A><B><FONT FACE="Courier New" SIZE=2>)</P>
</B></FONT><FONT SIZE=2>
<P>See the ImageMagic documentation for more possibilities.</P>

<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830778">7.5 CALC Module</A> </P>
</B></FONT><FONT SIZE=2>
<P>By using the CALC module you are able to perform calculations. The module implements a simple LL(1)</P>
<P>grammar to calculate simple expressions with the basic operations +,-,*,/, and brackets.</P>

<P>The syntax is as follows:</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-CALC-(expression)</P>
</B></FONT><FONT SIZE=2>
<P>Where expression can be something like (5+5)*8-3/5. </P>

<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830779">7.6 STATS Module</A> </P>
</B></FONT><FONT SIZE=2>
<P>By using the STATS module, you're able to set markers in your HMTL pages. Each time the page is requested the marker will be increased by one. </P>

<P>You can set a marker in your HTML page by using the command:</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-STATS-ADDCOUNT-[number of your marker].</P>
</B></FONT><FONT SIZE=2>
<P> To get the number of page views just use the command:</P>
</FONT><B><FONT FACE="Courier New" SIZE=2><P>$MOD-STATS-GETCOUNT-[number of your marker]</P>
</B></FONT><FONT SIZE=2>
<P>&nbsp;</P>
</FONT><B><FONT FACE="Arial" SIZE=2><P><A NAME="_Toc521830780">7.7 CACHE HENK</A> </P>
</B></FONT><FONT SIZE=2>
<P>By placing &lt;CACHE HENK&gt; in your ‘.shtml’ page, the page will be cached and not recalculated each time.</P>

<P>Syntax </FONT><B><FONT FACE="Courier New" SIZE=2>&lt;CACHE HENK n&gt;</B></FONT><FONT SIZE=2>: n not specified expires in 6 hours, n as number expires in n seconds, n as NOEXPIRE does not expire</P>

<P>Before you can use the &lt;CACHE HENK&gt; tag, the CACHE module has to be installed.</P></FONT></BODY>
</HTML>
